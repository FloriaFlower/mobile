# 自定义论坛风格功能使用文档

## 📖 功能概述

自定义论坛风格功能允许用户创建、管理和使用个性化的论坛讨论风格。通过AI生成技术，用户可以轻松创建符合特定需求的论坛风格，并在论坛生成中使用。

## 🚀 快速开始

### 1. 访问风格管理页面

1. 打开移动端界面
2. 点击右上角的设置按钮
3. 选择"API设置"
4. 点击"论坛风格"标签页

### 2. 创建第一个自定义风格

1. 点击"创建自定义风格"按钮
2. 输入风格名称（如：温柔小姐姐）
3. 详细描述风格特点：
   ```
   - 说话方式：温柔、可爱、喜欢用颜文字
   - 关注话题：美妆、穿搭、日常生活
   - 互动特点：喜欢夸奖别人、经常分享心得
   - 用户名风格：甜美可爱类型
   ```
4. 点击"生成风格"按钮
5. 等待AI生成完成
6. 在预览界面中编辑和完善风格内容
7. 点击"保存风格"

### 3. 使用自定义风格

1. 在论坛控制面板中选择你创建的自定义风格
2. 或在API设置的论坛页面中选择自定义风格
3. 开始生成论坛内容，系统会使用你的自定义风格

## 🎨 功能详解

### 风格创建

**风格名称**
- 建议使用简洁明了的名称
- 最多20个字符
- 不能与预设风格重名

**风格描述**
- 详细描述期望的风格特点
- 包含说话方式、关注话题、互动特点等
- 描述越详细，AI生成的风格越准确
- 最多500个字符

**AI生成过程**
- 系统使用专业的风格生成提示词
- 基于用户描述生成完整的风格定义
- 生成的风格包含角色设定、风格要求等完整结构

### 风格编辑

**预览编辑器**
- 支持语法高亮
- 实时字符计数
- 格式验证功能
- 内容格式化工具

**编辑功能**
- 格式化：自动整理内容格式
- 验证：检查风格格式是否符合规范
- 重新生成：基于原始描述重新生成风格
- 保存：保存修改后的风格

### 风格管理

**风格列表**
- 显示所有自定义风格
- 包含创建时间、更新时间、字符数等信息
- 支持编辑、复制、删除操作

**批量操作**
- 导出：将所有自定义风格导出为JSON文件
- 导入：从JSON文件导入风格
- 支持重复风格处理和错误恢复

## 🔧 高级功能

### 导入导出

**导出风格**
```json
{
  "version": "1.0",
  "exportTime": "2024-01-01T00:00:00.000Z",
  "styles": [
    {
      "id": "custom_1704067200000",
      "name": "温柔小姐姐",
      "description": "温柔可爱的风格...",
      "prompt": "你是一位温柔可爱的小姐姐...",
      "createdAt": "2024-01-01T00:00:00.000Z",
      "updatedAt": "2024-01-01T00:00:00.000Z",
      "isCustom": true
    }
  ]
}
```

**导入风格**
- 支持JSON格式文件
- 自动处理重复风格
- 提供详细的导入结果报告

### 风格选择器集成

**自动更新**
- 创建、编辑、删除风格后自动更新选择器
- 支持分组显示（预设风格 vs 自定义风格）
- 在所有相关界面中同步显示

**兼容性**
- 与现有论坛系统完全兼容
- 支持三种操作类型：发帖、回复、生成
- 无缝集成到现有工作流程

## 🛠️ 技术实现

### 存储机制
- 使用localStorage本地存储
- 数据格式向后兼容
- 支持数据验证和错误恢复

### API集成
- 复用现有的API调用方式
- 使用mobileCustomAPIConfig.callAPI()
- 支持错误处理和重试机制

### 响应式设计
- 适配移动端和桌面端
- 参考现有UI组件设计
- 保持一致的用户体验

## 🧪 测试验证

### 运行测试脚本
```javascript
// 在浏览器控制台中运行
window.testCustomStyles.runAllTests()
```

### 测试内容
- ForumStyles类基础功能
- 自定义风格存储管理
- 风格导入导出功能
- 风格选择器集成
- UI界面功能

## 🐛 故障排除

### 常见问题

**Q: 创建风格时提示"API配置未初始化"**
A: 请先在API设置中配置正确的API信息

**Q: 生成的风格格式不正确**
A: 使用预览编辑器中的"验证"功能检查格式，或点击"格式化"自动整理

**Q: 自定义风格在选择器中不显示**
A: 检查风格是否保存成功，或尝试刷新页面

**Q: 导入风格失败**
A: 确保JSON文件格式正确，检查文件是否损坏

### 调试信息
- 打开浏览器开发者工具
- 查看控制台日志
- 搜索"[ForumStyles]"或"[Mobile Phone]"相关日志

## 📝 最佳实践

### 风格描述建议
1. **具体明确**：描述具体的说话方式和行为特点
2. **包含示例**：提供典型的用词和表达方式
3. **考虑场景**：描述在不同情况下的反应方式
4. **保持一致**：确保描述的各个方面相互协调

### 风格命名规范
1. 使用有意义的名称
2. 避免特殊字符
3. 考虑排序和分类
4. 保持简洁明了

### 管理建议
1. 定期备份自定义风格
2. 为重要风格创建副本
3. 及时清理不需要的风格
4. 记录风格的使用场景和效果

## 🔄 更新日志

### v1.0.0 (2024-01-01)
- 初始版本发布
- 支持AI风格生成
- 完整的CRUD操作
- 导入导出功能
- 响应式UI设计
- 与现有系统集成

---

**技术支持**: 如有问题请查看控制台日志或联系开发团队
